<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>WPS新闻站</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
	<script src="./database.js" type="module"></script>
	<script type="text/javascript">
		import { data } from "database";
		function init() {
			const hasKey = window.prompt("请输入访问密钥") == "滨湖823班";
			if (!hasKey) {
				window.alert("给我爬。");
				window.history.back();
				return;
			}
			const list = document.getElementById("list");
			for (let i = 0; i < data.length; i++) {
				var item = document.createElement("li");
				item.innerHTML = "<span>" + data.title + "</span><br><span style=\"--clr #999999;\">提交于" + formatTimestamp(data.timestamp, true) + "</span>";
				item.onclick = function() {
					window.open("./" + data.uuid + "");
				}
				list.appendChild(item);
			}
		}
		function formatTimestamp(timestamp, isSecond) {
			if (isSecond) timestamp *= 1000;
			const date = new Date(timestamp);
			return `${date.getFullYear()}年${String(date.getMonth() + 1).padStart(2, '0')}月${String(date.getDate()).padStart(2, '0')}日 ${date.getHours()}:${date.getMinutes()}`;
		}
	</script>
	<style type="text/css">
		ul {
			list-style-type: none;
			padding: 0;
		}
		li {
			background-repeat: no-repeat;
			background-position: left center;
			background-size: 30px;
			display: block;
			top: 50%;
			background-color: #f4f4f4;
			border: 1px solid #ddd;
			border-radius: 10px;
			margin: 5px 0;
			padding: 10px;
			padding-left: 36px;
			transition: background-color 0.3s;
		}
		li:hover {
			background-color: #e2e2e2;
		}
	</style>
</head>
<body onload="init()">
	<h1>WPS新闻站</h1>
	<p>此为初二（23）班内部新闻网站，<span style="color:red;">没有访问密钥全部给我爬。</span></p>
	<ul id="list"/>
</body>
</html>
